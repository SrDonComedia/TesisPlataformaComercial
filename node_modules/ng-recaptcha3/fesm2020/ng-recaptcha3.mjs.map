{"version":3,"file":"ng-recaptcha3.mjs","sources":["../../../projects/ng-recaptcha3/src/lib/ng-recaptcha3.service.ts","../../../projects/ng-recaptcha3/src/public-api.ts","../../../projects/ng-recaptcha3/src/ng-recaptcha3.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class NgRecaptcha3Service {\n\n  private baseUrl = 'https://www.google.com/recaptcha/api.js';\n  private siteKey = '';\n  private isLoaded: Boolean = false;\n  private scriptId;\n\n\n  public constructor() {\n    (window as any)['ngRecaptcha3Loaded'] = () => {\n      this.isLoaded = true;\n    };\n    this.scriptId = +(new Date());\n  }\n\n  public getToken(action?: any): Promise<any> {\n    try {\n      return (window as any)['grecaptcha'].execute(this.siteKey, action);\n    } catch (e) {\n      return new Promise((resolve, reject) => {\n        reject(e);\n      });\n    }\n  }\n\n  public init(siteKey: string) {\n    return new Promise((resolve, reject) => {\n      if (this.isLoaded) {\n        resolve('success');\n        return;\n      } else {\n        this.siteKey = siteKey;\n        const script = document.createElement('script');\n        script.innerHTML = '';\n        script.src = this.baseUrl + `?render=${this.siteKey}&onload=ngRecaptcha3Loaded`;\n        script.id = `recapthcha-${this.scriptId}`;\n        script.async = true;\n        script.defer = true;\n        script.onload = () => {\n          resolve('success');\n        }\n        script.onerror = () => {\n          reject('error');\n        };\n        document.head.appendChild(script);\n      }\n\n    });\n\n  }\n\n\n\n  public destroy() {\n\tthis.isLoaded = false;\n    const script = document.getElementById(`recapthcha-${this.scriptId}`);\n    if (script) {\n      script.remove();\n    }\n    const badge = document.getElementsByClassName('grecaptcha-badge')[0];\n    if (badge) {\n      badge.remove();\n    }\n\n  }\n\n\n}\n","/*\n * Public API Surface of ng-recaptcha3\n */\n\nexport * from './lib/ng-recaptcha3.service';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}